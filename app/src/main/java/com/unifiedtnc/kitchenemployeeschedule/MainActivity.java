package com.unifiedtnc.kitchenemployeeschedule;import androidx.appcompat.app.AppCompatActivity;import android.content.Context;import android.content.Intent;import android.content.SharedPreferences;import android.os.Bundle;import android.text.TextUtils;import android.util.Log;import android.util.Patterns;import android.view.View;import android.view.inputmethod.InputMethodManager;import android.widget.Button;import android.widget.CheckBox;import android.widget.EditText;import android.widget.ProgressBar;import android.widget.TextView;import android.widget.Toast;import com.unifiedtnc.kitchenemployeeschedule.RetrofitResponseModle.LoginResponse;import com.unifiedtnc.kitchenemployeeschedule.RetrofitResponseModle.User;import retrofit2.Call;import retrofit2.Callback;import retrofit2.Response;public class MainActivity extends AppCompatActivity {    EditText  email,password;    ProgressBar progressBar;    Button loginBtn;    TextView btnsignin, btnsignup;    private CheckBox saveLoginCheckBox;    private SharedPreferences loginPreferences;    private SharedPreferences.Editor loginPrefsEditor;    private Boolean saveLogin;    String str_email;    String str_password;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main1);        getSupportActionBar().hide();        email=findViewById(R.id.editTextTextPersonName4);        password=findViewById(R.id.editTextTextPersonName2);        progressBar=findViewById(R.id.progressBar);        btnsignin=findViewById(R.id.button);        btnsignup=findViewById(R.id.button2);        btnsignup.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                startActivity(new Intent(MainActivity.this, SignUpActivity.class));            }        });        saveLoginCheckBox = (CheckBox)findViewById(R.id.checkBox);        loginPreferences = getSharedPreferences("loginPrefs", MODE_PRIVATE);        loginPrefsEditor = loginPreferences.edit();        saveLogin = loginPreferences.getBoolean("saveLogin", false);        if (saveLogin == true) {            email.setText(loginPreferences.getString("username", ""));            password.setText(loginPreferences.getString("password", ""));            saveLoginCheckBox.setChecked(true);        }        btnsignin.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);                imm.hideSoftInputFromWindow(email.getWindowToken(), 0);               str_email = email.getText().toString().trim();               str_password = password.getText().toString().trim();                if (saveLoginCheckBox.isChecked()) {                    loginPrefsEditor.putBoolean("saveLogin", true);                    loginPrefsEditor.putString("username", str_email);                    loginPrefsEditor.putString("password", str_password);                    loginPrefsEditor.commit();                } else {                    loginPrefsEditor.clear();                    loginPrefsEditor.commit();                }                    loginFun();            }        });    }    private void loginFun() {        if (TextUtils.isEmpty(str_email)) {            email.setError("Empty Field..!");            return;        } else        if (!Patterns.EMAIL_ADDRESS.matcher(str_email).matches()) {            email.requestFocus();            email.setError("Wrong Email Format...!");            return;        } else        if (TextUtils.isEmpty(str_password)){            password.setError("Empty Field...!");            return;        }else {   progressBar.setVisibility(View.VISIBLE);            Call<LoginResponse> call = RetrofitClient                    .getInstance()                    .getApi()                    .login(str_email,str_password);            call.enqueue(new Callback<LoginResponse>() {                @Override                public void onResponse(Call<LoginResponse> call, Response<LoginResponse> response) {                    LoginResponse loginResponse=response.body();                    if (response.isSuccessful()){                        progressBar.setVisibility(View.GONE);                        if (loginResponse.getMessage().equals("success"))                        {                       Appdata.userId=  response.body().getData().get(0).getE_id();                       Appdata.EMAIL=  response.body().getData().get(0).getEmail();                       Appdata.NAME=  response.body().getData().get(0).getName();                            Toast.makeText(MainActivity.this, loginResponse.getMessage(), Toast.LENGTH_SHORT).show();                            startActivity(new Intent(MainActivity.this,HomeScreen.class));                            finish();                        }                    }                }                @Override                public void onFailure(Call<LoginResponse> call, Throwable t) {                    progressBar.setVisibility(View.GONE);                    Toast.makeText(MainActivity.this, t.getMessage(), Toast.LENGTH_SHORT).show();                }            });        }    }    public void signUpbtn(View view) {        startActivity(new Intent(MainActivity.this,SignUpActivity.class));        finish();    }}